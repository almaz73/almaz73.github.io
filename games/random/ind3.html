<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>–ò–≥—Ä–∞: –ù–∞–∂–º–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É</title>
    <style>
        /* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            padding: 20px;
        }

        h1 {
            margin-bottom: 10px;
            color: #333;
        }

        .controls {
            margin-bottom: 20px;
            text-align: center;
        }

        .timer {
            font-size: 1.8rem;
            color: #444;
            margin: 10px 0;
        }

        button {
            padding: 12px 24px;
            font-size: 1.1rem;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #game-area {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 500px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .circle {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s;
        }

        .circle:hover {
            transform: scale(1.05);
        }

        .result {
            margin-top: 20px;
            font-size: 1.5rem;
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>–ù–∞–∂–º–∏  –æ—Ç 1 –¥–æ 10</h1>

<div class="controls">
    <div class="timer">–í—Ä–µ–º—è: 0.0 —Å</div>
    <button id="start-btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
</div>

<div id="game-area"></div>

<div class="result" id="result"></div>

<script>
    // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
    let currentRound = 0;           // —Ç–µ–∫—É—â–∏–π —Ä–∞—É–Ω–¥ (1-3)
    let totalRounds = 3;
    let circles = [];               // –º–∞—Å—Å–∏–≤ –∫—Ä—É–∂–∫–æ–≤
    let targetNumber = 1;           // —Å–ª–µ–¥—É—é—â–µ–µ —á–∏—Å–ª–æ –¥–ª—è –Ω–∞–∂–∞—Ç–∏—è
    let startTime = null;           // –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ç–∞–π–º–µ—Ä–∞
    let elapsedTime = 0;            // –æ–±—â–µ–µ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
    let timerInterval = null;       // –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç–∞–π–º–µ—Ä–∞

    const gameArea = document.getElementById('game-area');
    const startBtn = document.getElementById('start-btn');
    const timerDisplay = document.querySelector('.timer');
    const resultDisplay = document.getElementById('result');

    // –§—É–Ω–∫—Ü–∏—è: —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [min, max]
    function random(min, max) {
        return Math.random() * (max - min) + min;
    }

    // –§—É–Ω–∫—Ü–∏—è: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ hex)
    function randomColor() {
        const r = Math.floor(random(50, 220));
        const g = Math.floor(random(50, 220));
        const b = Math.floor(random(50, 220));
        return `rgb(${r}, ${g}, ${b})`;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–≤—É—Ö –∫—Ä—É–≥–æ–≤ (–ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –∏ —Ä–∞–¥–∏—É—Å–∞–º)
    function isOverlapping(circle1, circle2) {
        const dx = circle1.x - circle2.x;
        const dy = circle1.y - circle2.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        return distance < (circle1.radius + circle2.radius);
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∫—Ä—É–∂–∫–∞ –±–µ–∑ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
    function generateCirclePosition(radius) {
        const margin = radius;
        const maxX = gameArea.clientWidth - margin;
        const maxY = gameArea.clientHeight - margin;

        let x, y;
        let attempts = 0;
        const maxAttempts = 100;

        do {
            x = random(margin, maxX);
            y = random(margin, maxY);

            const newCircle = { x, y, radius };

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫—Ä—É–∂–∫–∞–º–∏
            const overlapping = circles.some((c) => isOverlapping(c, newCircle));

            if (!overlapping) {
                return newCircle;
            }

            attempts++;
        } while (attempts < maxAttempts);

        // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ ‚Äî –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º (—á—Ç–æ–±—ã –Ω–µ –∑–∞–≤–∏—Å–Ω—É—Ç—å)
        return { x, y, radius };
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∫—Ä—É–∂–∫–∞
    function createCircle(number) {
        const diameter = random(40, 100); // –æ—Ç 40px –¥–æ 100px
        const radius = diameter / 2;

        const position = generateCirclePosition(radius);

        const circle = document.createElement('div');
        circle.className = 'circle';
        circle.textContent = number;
        circle.style.width = `${diameter}px`;
        circle.style.height = `${diameter}px`;
        circle.style.left = `${position.x - radius}px`;
        circle.style.top = `${position.y - radius}px`;
        circle.style.backgroundColor = randomColor();
        circle.dataset.number = number;

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
        circle.addEventListener('click', () => handleCircleClick(number, circle));

        gameArea.appendChild(circle);

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
        circles.push({
            x: position.x,
            y: position.y,
            radius: radius,
            element: circle,
        });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫—Ä—É–∂–∫—É
    function handleCircleClick(number, element) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ª–∏ —á–∏—Å–ª–æ –Ω–∞–∂–∞—Ç–æ
        if (number === targetNumber) {
            element.style.opacity = '0';
            element.style.pointerEvents = 'none'; // –æ—Ç–∫–ª—é—á–∞–µ–º –∫–ª–∏–∫
            setTimeout(() => {
                element.remove();
            }, 300);

            // –£–¥–∞–ª—è–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ circles
            circles = circles.filter(c => c.element !== element);

            targetNumber++;

            // –ï—Å–ª–∏ –≤—Å–µ 10 –Ω–∞–∂–∞—Ç—ã ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞—É–Ω–¥
            if (targetNumber > 10) {
                endRound();
            }
        }
        // –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–µ —Ç–æ —á–∏—Å–ª–æ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
    }

    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞
    function endRound() {
        currentRound++;

        // –ï—Å–ª–∏ –µ—â—ë –µ—Å—Ç—å —Ä–∞—É–Ω–¥—ã
        if (currentRound < totalRounds) {
            setTimeout(() => {
                resetCircles();
                startNewRound();
            }, 500);
        } else {
            // –í—Å–µ —Ä–∞—É–Ω–¥—ã –∑–∞–∫–æ–Ω—á–µ–Ω—ã
            stopTimer();
            resultDisplay.textContent = `üéâ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –û–±—â–µ–µ –≤—Ä–µ–º—è: ${elapsedTime.toFixed(1)} —Å–µ–∫.`;
            startBtn.textContent = '–ò–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ';
            startBtn.disabled = false;
        }
    }

    // –°–±—Ä–æ—Å –≤—Å–µ—Ö –∫—Ä—É–∂–∫–æ–≤
    function resetCircles() {
        circles.forEach(c => c.element.remove());
        circles = [];
        targetNumber = 1;
    }

    // –ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞
    function startNewRound() {
        for (let i = 1; i <= 10; i++) {
            createCircle(i);
        }
    }

    // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
    function startTimer() {
        startTime = Date.now() - (elapsedTime * 1000);
        timerInterval = setInterval(() => {
            elapsedTime = (Date.now() - startTime) / 1000;
            timerDisplay.textContent = `–í—Ä–µ–º—è: ${elapsedTime.toFixed(1)} —Å`;
        }, 100);
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞
    function stopTimer() {
        clearInterval(timerInterval);
    }

    // –°–±—Ä–æ—Å –≤—Å–µ–π –∏–≥—Ä—ã
    function resetGame() {
        resetCircles();
        currentRound = 0;
        elapsedTime = 0;
        timerDisplay.textContent = '–í—Ä–µ–º—è: 0.0 —Å';
        resultDisplay.textContent = '';
        startBtn.disabled = true;
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å"
    startBtn.addEventListener('click', () => {
        resetGame();
        startTimer();
        startNewRound();
        startBtn.disabled = true;
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: —Å–∫—Ä—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É
    resultDisplay.textContent = '';
    startBtn.disabled = false;
</script>

</body>
</html>